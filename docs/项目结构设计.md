# 后台管理系统项目结构设计

## 📋 项目概述

本项目是一个基于 Next.js 的现代化后台管理系统，采用 TypeScript、Tailwind CSS、shadcn/ui、Zustand、React Hook Form 等主流技术栈，具备清晰的项目结构和良好的可扩展性。

## 🏗️ 技术栈

- **框架**: Next.js 15+ (App Router)
- **语言**: TypeScript
- **样式**: Tailwind CSS + shadcn/ui
- **状态管理**: Zustand
- **表单处理**: React Hook Form + Zod
- **HTTP 请求**: Axios
- **图标**: Lucide React
- **代码质量**: ESLint + Prettier + Husky

## 📁 目录结构

```
src/
├── app/                          # Next.js App Router
│   ├── (auth)/                  # 认证路由组
│   │   ├── login/
│   │   │   ├── page.tsx
│   │   │   └── layout.tsx
│   │   └── register/
│   │       ├── page.tsx
│   │       └── layout.tsx
│   ├── (dashboard)/             # 主应用路由组
│   │   ├── dashboard/
│   │   │   ├── page.tsx
│   │   │   └── layout.tsx
│   │   ├── profile/
│   │   │   ├── page.tsx
│   │   │   └── layout.tsx
│   │   └── settings/
│   │       ├── page.tsx
│   │       └── layout.tsx
│   ├── layout.tsx               # 根布局
│   ├── page.tsx                 # 首页
│   ├── loading.tsx              # 全局加载组件
│   ├── error.tsx                # 全局错误组件
│   ├── globals.css              # 全局样式
│   └── favicon.ico              # 网站图标
├── components/                  # 组件库
│   ├── ui/                      # shadcn/ui 基础组件
│   │   ├── button.tsx
│   │   ├── input.tsx
│   │   ├── card.tsx
│   │   ├── form.tsx
│   │   ├── select.tsx
│   │   ├── textarea.tsx
│   │   └── label.tsx
│   ├── layout/                  # 布局组件
│   │   ├── Header.tsx           # 头部导航
│   │   ├── Sidebar.tsx          # 侧边栏
│   │   ├── Footer.tsx           # 页脚
│   │   └── MainLayout.tsx       # 主布局容器
│   ├── forms/                   # 表单组件
│   │   ├── FormField.tsx        # 表单字段组件
│   │   ├── FormSection.tsx      # 表单分组组件
│   │   └── FormContainer.tsx    # 表单容器组件
│   └── common/                  # 通用组件
│       ├── Loading.tsx          # 加载组件
│       ├── Empty.tsx            # 空状态组件
│       ├── ErrorBoundary.tsx    # 错误边界组件
│       ├── ConfirmDialog.tsx    # 确认对话框
│       └── Image.tsx            # 图片组件
├── lib/                         # 核心库和配置
│   ├── utils.ts                 # 通用工具函数
│   ├── api.ts                   # API 配置和请求封装
│   ├── auth.ts                  # 认证相关工具函数
│   ├── validation.ts            # 表单验证规则
│   └── constants/               # 常量定义
│       ├── routes.ts            # 路由常量
│       ├── api.ts               # API 端点常量
│       ├── storage.ts           # 本地存储键值
│       └── config.ts            # 应用配置常量
├── store/                       # Zustand 状态管理
│   ├── authStore.ts             # 认证状态管理
│   ├── userStore.ts             # 用户状态管理
│   ├── appStore.ts              # 应用全局状态
│   └── index.ts                 # Store 统一导出
├── hooks/                       # 自定义 Hooks
│   ├── useAuth.ts               # 认证相关 Hook
│   ├── useApi.ts                # API 请求 Hook
│   ├── useLocalStorage.ts       # 本地存储 Hook
│   ├── useDebounce.ts           # 防抖 Hook
│   ├── usePermissions.ts        # 权限检查 Hook
│   └── index.ts                 # Hooks 统一导出
├── types/                       # TypeScript 类型定义
│   ├── auth.ts                  # 认证相关类型
│   ├── user.ts                  # 用户相关类型
│   ├── api.ts                   # API 响应类型
│   ├── common.ts                # 通用类型定义
│   └── index.ts                 # 类型统一导出
└── middleware.ts                # Next.js 中间件
```

## 🏛️ 架构设计原则

### 1. 分层架构

- **表现层**: `components/` - React 组件和页面
- **逻辑层**: `hooks/` - 业务逻辑封装
- **状态层**: `store/` - 全局状态管理
- **工具层**: `lib/` - 工具函数和配置
- **类型层**: `types/` - TypeScript 类型定义

### 2. 功能分离

- 按技术职责划分目录，每个目录职责单一
- 组件按功能分类：UI、布局、表单、通用
- 业务逻辑通过 Hooks 封装，提高复用性

### 3. 简化设计

- 移除复杂的服务层抽象，API 请求直接在 lib 中处理
- 使用 Tailwind CSS，无需额外样式文件
- 保持结构简单直观，降低学习成本

## 📂 目录详细说明

### `app/` - 应用路由

使用 Next.js 13+ App Router，支持：

- 路由组 `(auth)`、`(dashboard)` 组织相关页面
- 布局文件 `layout.tsx` 定义共享 UI
- 错误处理 `error.tsx` 和加载状态 `loading.tsx`
- 并行路由和拦截路由支持

### `components/` - 组件库

组件按功能分类：

- `ui/`: shadcn/ui 基础组件，提供设计系统一致性
- `layout/`: 页面布局相关组件
- `forms/`: 表单专用组件，基于 React Hook Form
- `common/`: 通用业务组件，提高复用性

### `lib/` - 核心功能

提供项目的核心功能支持：

- `api.ts`: Axios 配置和 API 请求封装
- `auth.ts`: JWT 令牌管理和认证工具
- `utils.ts`: 通用工具函数
- `constants/`: 项目常量集中管理

### `store/` - 状态管理

基于 Zustand 的轻量级状态管理：

- 按功能域划分 store（auth、user、app）
- 支持状态持久化
- TypeScript 类型安全

### `hooks/` - 自定义 Hooks

封装可复用的业务逻辑：

- 数据获取和状态管理
- 副作用处理（防抖、权限检查等）
- 组件间逻辑共享

### `types/` - 类型定义

完整的 TypeScript 类型系统：

- API 请求和响应类型
- 组件 Props 类型
- 业务实体类型

## 🎯 开发规范

### 1. 命名规范

- 组件文件使用 PascalCase：`UserProfile.tsx`
- 工具函数使用 camelCase：`formatDate.ts`
- 常量使用 UPPER_SNAKE_CASE：`API_BASE_URL`
- 类型定义使用 PascalCase：`UserType`

### 2. 导入规范

```typescript
// 第三方库
import React from 'react';
import { useState } from 'react';

// 内部模块（按层级顺序）
import { Button } from '@/components/ui/button';
import { useAuth } from '@/hooks';
import { User } from '@/types';
```

### 3. 组件结构

```typescript
// 组件文件结构
import { ComponentProps } from './Component.types';
import { useComponentLogic } from './Component.hooks';

export const Component = ({ ...props }: ComponentProps) => {
  const { ... } = useComponentLogic(props);

  return (
    <div>
      {/* JSX 内容 */}
    </div>
  );
};
```

## 🚀 项目启动

### 开发环境

```bash
npm run dev      # 启动开发服务器
npm run build    # 构建生产版本
npm run start    # 启动生产服务器
npm run lint     # 代码检查
npm run format   # 代码格式化
```

### 代码质量工具

- **ESLint**: 代码规范检查
- **Prettier**: 代码格式化
- **Husky**: Git 钩子管理
- **lint-staged**: 提交前代码检查

## 📈 扩展指南

### 1. 添加新页面

在 `app/` 目录下创建新的路由文件，遵循 App Router 约定。

### 2. 添加新组件

根据组件类型在 `components/` 对应目录下创建，确保可复用性。

### 3. 添加新的状态

在 `store/` 下创建新的 store 文件，并在 `index.ts` 中导出。

### 4. 添加新的 API

在 `lib/api.ts` 中添加新的 API 方法，确保类型安全。

## 🎨 设计特点

1. **简洁性**: 结构简单直观，降低学习成本
2. **可扩展性**: 模块化设计，便于功能扩展
3. **类型安全**: 完整的 TypeScript 支持
4. **开发体验**: 热重载、智能提示、代码检查
5. **性能优化**: 组件懒加载、代码分割
6. **维护友好**: 清晰的目录结构和命名规范

这个项目结构适合中小型后台管理系统开发，既保持了现代化的技术栈，又避免了过度设计，能够快速开发和迭代。
